function updateClickEvents(){function a(a){var b=document.createElement("div");b.innerHTML=a;return b.childNodes.length===0?"":b.childNodes[0].nodeValue}$(".embed-content").on("shown",function(b){var c=$(".modal-body",$(this));console.log("SHOWING",c);if(c!==null){var d=c.html();c.html(a(d))}console.log("SHOWING",a(c.html()))});$(".embed-content").on("hidden",function(a){var b=$(".modal-body",$(this));if(b!==null){var c=b.html();b.text(c)}})}function show_alert(a,b,c){$("#tiles").css("opacity","0").empty();var d='<div class="fade in alert alert-'+c+'">       <a class="close" data-dismiss="alert">&times;</a>       <strong>'+a+"</strong>  "+b+"</div>";$("#alert-messages").append(d);$("#alert-messages").alert()}function create_page(){var a=$("#twitter-search").attr("value"),b=$("#youtube-search").attr("value"),c=$("#vimeo-search").attr("value"),d=$("#Page-Name").Attr("Value");console.log(a,d);var e={name:d,t:a,yt:b,v:c};$.ajax({type:"POST",url:"/page",data:e,success:function(a,b,c){console.log(a,b,c);show_alert("Success!","Page created","success")},error:function(a,b,c){console.log(a,b,c);show_alert("Error!",a.responseText,"error")},dataType:"json"})}function removeSearchHelp(){$(function(){$("#search-boxes .control-group").removeClass("error warning success",100);$("#search-boxes .help-block").animate({opacity:0},{duration:100,queue:!1})})}function draw_layout(a){console.log(a);var b="",c=0,d=[];for(c in a){var e=a[c],f="",g="",h="";if(e.media.length>0){e.media[0].type==="photo"&&(g='<div class="photo-thumbnail"><img src="'+e.media[0].thumbnail_url+'" height="360" width="480" /></div>');if(e.media[0].type==="video"||e.media[0].type=="html"){var i="video_"+gElementCount;g='                <div class="video-thumbnail">                  <a data-toggle="modal" href="#'+i+'" >                    <div class="circle-play-icon"></div>                  </a>                  <div style="display: none" id="'+i+'" class="modal fade embed-content">                    <div class="modal-header">                      <a class="close" data-dismiss="modal">x</a>'+e.title+'</div>                    <div class="modal-body center">'+$("<div/>").text(e.media[0].html).html()+'</div>                    <div class="modal-footer">                    </div>                  </div>                  <img src="'+e.media[0].thumbnail_url+'" height="360" width="480"/>                </div>';f=e.media[0].html}else e.media[0].type=="html"&&(g=e.media[0].html);h=e.media[0].provider_name+"<br />";d.push(e.media[0].thumbnail_url)}var j='<a href="'+e.user_url+'" rel="nofollow" target="_blank">'+e.screen_name+"</a>",k=j+"<br />"+e.title;b+="<li>"+g+"<p>"+k+"</p></li>";gElementCount+=1}$("#tiles").html(b);var l=0;$("#tiles").waitForImages({finished:function(){console.log("All images are loaded.");$("#main-separator").fadeIn(1e3);$("#tiles li").wookmark(WookmarkOptions);$("#tiles").animate({opacity:1},1e3)},each:function(){},waitForAll:!0});updateClickEvents()}function search(){function d(){$.ajax({url:"/search?t="+a+"&yt="+b+"&v="+c,success:function(a,b,c){console.log("finish");$("#main-progress-bar").fadeOut(300);var d=JSON.parse(a);if(d.length===0){show_alert("Oops","No likes, favorites or shares exist for this user","info");return}draw_layout(d)},error:function(a,b,c){console.log(a,b,c);$("#main-progress-bar").fadeOut(300);if(a.status===400){$("#search-boxes .help-block").html(a.responseText);$(function(){$("#search-boxes .control-group").addClass("error",150);$("#search-boxes .help-block").animate({opacity:1},{duration:150,queue:!1})})}else show_alert("Error!","Something went wrong","error")}})}var a=$.trim($("#twitter-search").attr("value")),b=$.trim($("#youtube-search").attr("value")),c=$.trim($("#vimeo-search").attr("value"));removeSearchHelp();if(a===""&&b===""&&c===""){$(function(){$("#search-boxes .control-group").addClass("warning",150);$("#search-boxes .help-block").animate({opacity:1},{duration:150,queue:!1});$("#search-boxes .help-block").html("You must enter at least 1 username")});return}$("#controls-row").animate({top:0},1e3,"easeOutExpo",function(){});$("#tiles").animate({opacity:0},300,function(){$(".alert").alert("close");$("#main-progress-bar").fadeIn(300);d()})}var WookmarkOptions,gElementCount=0;$(document).load(new function(){var a=!1;$("#search-boxes input[type='text']").each(function(b,c){$(this).attr("value").length!==0&&(a=!0);b===$("#search-boxes input[type='text']").size()-1&&a&&search()})});$(document).ready(function(){gElementCount=0;WookmarkOptions={autoResize:!0,container:$("#tile-container"),offset:10};updateClickEvents();$("#search-boxes input[type='text']").keypress(function(a){a.which===13&&search()});$("#search-boxes input[type='text']").keyup(function(a){a.which!=13&&removeSearchHelp()})});